<UserControl
    x:Class="kc_yt_downloader.GUI.View.Controls.Modals.SettingsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:kc_yt_downloader.GUI.View.Controls.Modals"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:model="clr-namespace:kc_yt_downloader.GUI.Model"
    xmlns:viewmodel="clr-namespace:kc_yt_downloader.GUI.ViewModel"
    d:DataContext="{d:DesignInstance Type=viewmodel:SettingsViewModel}"
    d:DesignHeight="1080"
    d:DesignWidth="1920"
    mc:Ignorable="d">
    <StackPanel
        Width="500"
        Margin="24">

        <TextBlock
            Margin="0 0 0 24"
            FontWeight="Bold"
            Style="{StaticResource MaterialDesignHeadline5TextBlock}"
            Text="Settings" />

        <Grid Margin="0 8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto" />
                <ColumnDefinition Width="auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Border
                Width="16"
                Height="1"
                BorderBrush="{StaticResource MaterialDesignDarkSeparatorBackground}"
                BorderThickness="1" />

            <TextBlock
                Grid.Column="1"
                Margin="12 0"
                Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                Text="Expiration times" />

            <Border
                Grid.Column="2"
                Height="1"
                BorderBrush="{StaticResource MaterialDesignDarkSeparatorBackground}"
                BorderThickness="1" />
        </Grid>

        <ItemsControl
            Grid.IsSharedSizeScope="True"
            ItemsSource="{Binding ExpirationTimes}">

            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Grid Margin="0 8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="auto" />
                            <ColumnDefinition Width="auto" SharedSizeGroup="status" />
                            <ColumnDefinition Width="auto" SharedSizeGroup="time" />
                        </Grid.ColumnDefinitions>

                        <ToggleButton
                            Grid.Column="0"
                            IsChecked="{Binding InfiniteExpirationTime}"
                            Style="{StaticResource MaterialDesignFlatToggleButton}">

                            <materialDesign:PackIcon Kind="Infinity" />
                        </ToggleButton>

                        <TextBox
                            Grid.Column="1"
                            MinWidth="100"
                            Margin="8 0"
                            Padding="12"
                            VerticalAlignment="Center"
                            materialDesign:HintAssist.Hint="Status"
                            IsReadOnly="True"
                            Style="{StaticResource MaterialDesignOutlinedTextBox}"
                            Text="{Binding Status, Mode=OneWay}" />


                        <TextBox
                            Grid.Column="2"
                            MinWidth="100"
                            Padding="12"
                            VerticalAlignment="Center"
                            materialDesign:HintAssist.Hint="Expiration time"
                            materialDesign:TextFieldAssist.SuffixText="days"
                            Style="{StaticResource MaterialDesignOutlinedTextBox}"
                            Text="{Binding ExpirationTimeDays}"
                            Visibility="{Binding InfiniteExpirationTime, Converter={StaticResource InvertBooleanToVisibilityConverter}}" />
                    </Grid>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>


        <StackPanel
            Margin="0 24 0 0"
            HorizontalAlignment="Right"
            Orientation="Horizontal">
            <Button
                Margin="0 0 8 0"
                HorizontalAlignment="Left"
                Command="{x:Static model:NavigationCommands.CloseModalCommand}"
                Content="Cancel"
                Style="{StaticResource MaterialDesignOutlinedButton}" />

            <Button
                HorizontalAlignment="Right"
                Command="{Binding SaveCommand}"
                Content="Save"
                Style="{StaticResource MaterialDesignOutlinedButton}" />
        </StackPanel>
    </StackPanel>
</UserControl>
